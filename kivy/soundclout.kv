#: kivy 1.10.0
#: import hex kivy.utils.get_color_from_hex
#: import main main
#: import ListAdapter kivy.adapters.listadapter.ListAdapter
#: import ListItemButton kivy.uix.listview.ListItemButton
#: import ScrollView kivy.uix.scrollview

<DeviceTemplateScreen>:
	rows: 2
	spacing: 10
	canvas:
		Color:
			rgba: 1,1,1,1
		Rectangle:
			pos: self.pos
			size: self.size

	BoxLayout:
		size_hint_y: None
		height: 50
		spacing: 10
		pos: root.x, (root.height-50)
		# Make the background for the toolbar blue
		canvas:
			Color:
				rgba: hex('#0099cc')
			Rectangle:
				pos: self.pos
				size: self.size
		Button:
			on_press: root.manager.current = 'homescreen_1'
			background_normal: 'icons/home.png'
			size_hint_x: None
			width:50

	BoxLayout:
		size_hint_y: None
		height: 500
		spacing: 50
		padding: 20
		pos: root.x, (root.height-560)

		BoxLayout:
			orientation: "vertical"
			spacing: 10
			padding: 10
			canvas:
				Color:
					rgba: hex('#0099cc')
				Rectangle:
					pos: self.pos
					size: self.size
			BoxLayout:
				size_hint_y: None
				orientation: "horizontal"
				height: 50
				spacing: 10
				padding: 0
				canvas:
					Color:
						rgba: hex('#0099cc')
					Rectangle:
						pos: self.pos
						size: self.size
				Button:
					size_hint_x: None
					size_hint_y: None
					height: 50
					width:100
					text: 'Back'

					on_press: root.back_out()
					on_release: root.manager.current = 'select_group_screen_8'
				Button:
					size_hint_x: None
					size_hint_y: None
					height: 50
					width:100
					text: 'Disconnect'

					#have to change first arguement, for now assume switch is on
					on_release: root.disconnect()
			BoxLayout:
				orientation: "horizontal"
				spacing: 10
				padding: 10
				canvas:
					Color:
						rgba: hex('#ffffff')
					Rectangle:
						pos: self.pos
						size: self.size

				GridLayout:
					id: GroupSettings
					cols: 2
					rows: 2
					spacing: 5
					padding: 5
					canvas:
						Color:
							rgba: hex('#ffffff')
						Rectangle:
							pos: self.pos
							size: self.size

					#Name
					BoxLayout:
						orientation: "horizontal"
						canvas:
							Color:
								rgba: hex('#98a6b3')
							Rectangle:
								pos: self.pos
								size: self.size

						Label:
							text: 'Name:'
							font_size: 24
						#TODO
						Label:
							text: 'Pi-1'
							font_size: 24

					#Number
					BoxLayout:
						orientation: "horizontal"
						canvas:
							Color:
								rgba: hex('#98a6b3')
							Rectangle:
								pos: self.pos
								size: self.size

						Label:
							text: 'Number:'
							font_size: 24
						#TODO
						Label:
							text: '1'
							font_size: 24

					#Port
					BoxLayout:
						orientation: "horizontal"
						canvas:
							Color:
								rgba: hex('#98a6b3')
							Rectangle:
								pos: self.pos
								size: self.size

						Label:
							text: 'Port:'
							font_size: 24
						#TODO
						Label:
							text: '1111'
							font_size: 24

<GroupTemplateScreen>:
	rows: 2
	spacing: 10
	canvas:
		Color:
			rgba: 1,1,1,1
		Rectangle:
			pos: self.pos
			size: self.size

	BoxLayout:
		size_hint_y: None
		height: 50
		spacing: 10
		pos: root.x, (root.height-50)

		# Make the background for the toolbar blue
		canvas:
			Color:
				rgba: hex('#0099cc')
			Rectangle:
				pos: self.pos
				size: self.size
		Button:
			on_press: root.manager.current = 'homescreen_1'
			background_normal: 'icons/home.png'
			size_hint_x: None
			width:50

	BoxLayout:
		size_hint_y: None
		height: 500
		spacing: 50
		padding: 20
		pos: root.x, (root.height-560)

		BoxLayout:
			orientation: "vertical"
			spacing: 10
			padding: 10
			canvas:
				Color:
					rgba: hex('#0099cc')
				Rectangle:
					pos: self.pos
					size: self.size

			BoxLayout:
				size_hint_y: None
				orientation: "horizontal"
				height: 50
				spacing: 10
				padding: 0
				canvas:
					Color:
						rgba: hex('#0099cc')
					Rectangle:
						pos: self.pos
						size: self.size

				Button:
					size_hint_x: None
					size_hint_y: None
					height: 50
					width:100
					text: 'Back'
					on_release: root.manager.current = 'edit_device_groups_screen_5'

				Button:
					size_hint_x: None
					size_hint_y: None
					height: 50
					width:100
					text: 'Remove'

					#have to change first arguement, for now assume switch is on
					on_press: root.removeGroup2()
					on_release:root.manager.current = 'edit_device_groups_screen_5'

			BoxLayout:
				orientation: "horizontal"
				spacing: 10
				padding: 10
				canvas:
					Color:
						rgba: hex('#ffffff')
					Rectangle:
						pos: self.pos
						size: self.size

				BoxLayout:
					orientation: "vertical"
					spacing: 10
					padding: 10
					canvas:
						Color:
							rgba: hex('#ffffff')
						Rectangle:
							pos: self.pos
							size: self.size
					ScrollView:
						do_scroll_x:False
						do_scroll_Y:True
						BoxLayout:
							id: devicelisting
							orientation: 'vertical'
							spacing: 5
							size_hint_y: None
							height: self.minimum_height

				BoxLayout:
					orientation: "vertical"
					spacing: 10
					padding: 10
					canvas:
						Color:
							rgba: hex('#ffffff')
						Rectangle:
							pos: self.pos
							size: self.size


					BoxLayout:
						id: groupName
						orientation: "horizontal"
						canvas:
							Color:
								rgba: hex('#98a6b3')
							Rectangle:
								pos: self.pos
								size: self.size
						Label
							text: "Name:"
							font_size: 30
						Label:
							id: groupNameLabel
							text: "Test"
							font_size: 30

					#Devices connected
					BoxLayout:
						id:devicesConnected
						orientation: "horizontal"
						canvas:
							Color:
								rgba: hex('#98a6b3')
							Rectangle:
								pos: self.pos
								size: self.size

<HomeScreen>:
	rows: 2
	spacing: 10
	canvas:
		Color:
			rgba: 1,1,1,1
		Rectangle:
			pos: self.pos
			size: self.size

	BoxLayout:
		size_hint_y: None
		height: 50
		spacing: 10
		pos: root.x, (root.height-50)

		# Make the background for the toolbar blue
		canvas:
			Color:
				rgba: hex('#0099cc')
			Rectangle:
				pos: self.pos
				size: self.size
		Button:
			on_press: root.manager.current = 'homescreen_1'
			background_normal: 'icons/home.png'
			size_hint_x: None
			width:50
		Button:
			text: "Test TL"
			on_press: root.manager.makeTL()
			size_hint_x: None

	BoxLayout:
		size_hint_y: None
		height: 500
		spacing: 50
		padding: 50
		pos: root.x, (root.height-560)

		BoxLayout:
			orientation: "vertical"
			spacing: 10
			padding: 10
			canvas:
				Color:
					rgba: hex('#0099cc')
				Rectangle:
					pos: self.pos
					size: self.size

			Button:
				text: "Start"
				font_size: 20
				on_press: root.manager.current = 'runscreen_2'

			Button:
				text: "Device Tester"
				font_size: 20
				on_press: root.manager.current = 'device_tester_screen_3'

			Button:
				text: "Connect Devices"
				font_size: 20
				on_press: root.manager.current = 'connect_devices_screen_4'

			Button:
				text: "Edit Device Groups"
				font_size: 20
				on_press: root.manager.current = 'edit_device_groups_screen_5'

			Button:
				text: "Edit Group Behavior"
				font_size: 20
				on_press: root.manager.current = str(root.skipBuild)
				on_release: root.skip_build_screen(1)

		BoxLayout:
			orientation: "vertical"
			spacing: 10
			padding: 10
			canvas:
				Color:
					rgba: hex('#0099cc')
				Rectangle:
					pos: self.pos
					size: self.size
			Button:
				text: ""
				font_size: 25
				background_normal: "icons/soundcloutimage.png"

<RunScreen>:
	rows: 2
	spacing: 10
	canvas:
		Color:
			rgba: 1,1,1,1
		Rectangle:
			pos: self.pos
			size: self.size

	BoxLayout:
		size_hint_y: None
		height: 50
		spacing: 10
		pos: root.x, (root.height-50)

		# Make the background for the toolbar blue
		canvas:
			Color:
				rgba: hex('#0099cc')
			Rectangle:
				pos: self.pos
				size: self.size
		Button:
			on_press: root.manager.current = 'homescreen_1'
			background_normal: 'icons/home.png'
			size_hint_x: None
			width:50

	BoxLayout:
		size_hint_y: None
		height: 500
		spacing: 50
		padding: 50
		pos: root.x, (root.height-560)

		BoxLayout:
			orientation: "vertical"
			spacing: 10
			padding: 10
			canvas:
				Color:
					rgba: hex('#0099cc')
				Rectangle:
					pos: self.pos
					size: self.size

			BoxLayout:
				orientation: "horizontal"
				size_hint_y: None
				height: 50
				canvas:
					Color:
						rgba: hex('#0099cc')
					Rectangle:
						pos: self.pos
						size: self.size
				Label:
					text: "Cycle Running"
					font_size: 30
					size_y_hint: None

				BoxLayout:
					id:timer


			BoxLayout:
				size_hint_y: .5
				orientation: "horizontal"
				canvas:
					Color:
						rgba: hex('#ffffff')
					Rectangle:
						pos: self.pos
						size: self.size
				Image:
					source: 'timeline.png'

<DeviceTesterScreen>:
	rows: 2
	spacing: 10
	canvas:
		Color:
			rgba: 1,1,1,1
		Rectangle:
			pos: self.pos
			size: self.size

	BoxLayout:
		size_hint_y: None
		height: 50
		spacing: 10
		pos: root.x, (root.height-50)

		# Make the background for the toolbar blue
		canvas:
			Color:
				rgba: hex('#0099cc')
			Rectangle:
				pos: self.pos
				size: self.size
		Button:
			on_press: root.manager.current = 'homescreen_1'
			background_normal: 'icons/home.png'
			size_hint_x: None
			width:50

	BoxLayout:
		size_hint_y: None
		height: 500
		spacing: 50
		padding: 50
		pos: root.x, (root.height-560)

		BoxLayout:
			orientation: "vertical"
			spacing: 10
			padding: 10
			canvas:
				Color:
					rgba: hex('#0099cc')
				Rectangle:
					pos: self.pos
					size: self.size
			BoxLayout:
				orientation: "vertical"
				size_hint_y: None
				height: 50

				Button:
					text: "Test Device(s)"
					font_size: 20
					height: 50
					on_press: root.testdevices()

			BoxLayout:
				orientation: "horizontal"
				canvas:
					Color:
						rgba: hex('#ffffff')
					Rectangle:
						pos: self.pos
						size: self.size

				#Adds Scrollability
				ScrollView:
					do_scroll_x:False
					do_scroll_Y:True

					BoxLayout:
						id: devicetestlisting
						padding: 40
						orientation: 'vertical'
						spacing: 10
						size_hint_y: None
						height: self.minimum_height

<ConnectDevicesScreen>:
	rows: 2
	spacing: 10
	canvas:
		Color:
			rgba: 1,1,1,1
		Rectangle:
			pos: self.pos
			size: self.size

	BoxLayout:
		size_hint_y: None
		height: 50
		spacing: 10
		pos: root.x, (root.height-50)

		# Make the background for the toolbar blue
		canvas:
			Color:
				rgba: hex('#0099cc')
			Rectangle:
				pos: self.pos
				size: self.size
		Button:
			on_press: root.manager.current = 'homescreen_1'
			background_normal: 'icons/home.png'
			size_hint_x: None
			width:50

	BoxLayout:
		size_hint_y: None
		height: 500
		spacing: 50
		padding: 50
		pos: root.x, (root.height-560)

		BoxLayout:
			orientation: "vertical"
			spacing: 10
			padding: 10
			canvas:
				Color:
					rgba: hex('#0099cc')
				Rectangle:
					pos: self.pos
					size: self.size

			BoxLayout:
				orientation: "horizontal"
				spacing: 10
				size_hint_y: None
				height: '100'
				canvas:
					Color:
						rgba: hex('#0099cc')
					Rectangle:
						pos: self.pos
						size: self.size

				Button:
					text: "Scan"
					font_size: 20
					height: 100
					on_press: root.scan()

			BoxLayout:
				orientation: "horizontal"
				canvas:
					Color:
						rgba: hex('#ffffff')
					Rectangle:
						pos: self.pos
						size: self.size

				ScrollView:
					do_scroll_x:False
					do_scroll_Y:True
					BoxLayout:
						id: scanlisting
						orientation: 'vertical'
						spacing: 5
						size_hint_y: None
						height: self.minimum_height

		BoxLayout:
			orientation: "vertical"
			spacing: 10
			padding: 10
			canvas:
				Color:
					rgba: hex('#0099cc')
				Rectangle:
					pos: self.pos
					size: self.size

			BoxLayout:
				orientation: "horizontal"
				spacing: 10
				size_hint_y: None
				height: '100'
				canvas:
					Color:
						rgba: hex('#0099cc')
					Rectangle:
						pos: self.pos
						size: self.size

				Button:
					text: "Disconnect All"
					font_size: 20
					height: 100
					on_press: root.disconnect_all()

			BoxLayout:
				orientation: "horizontal"
				canvas:
					Color:
						rgba: hex('#ffffff')
					Rectangle:
						pos: self.pos
						size: self.size

				ScrollView:
					do_scroll_x:False
					do_scroll_Y:True
					BoxLayout:
						id: devicelisting
						orientation: 'vertical'
						spacing: 5
						size_hint_y: None
						height: self.minimum_height

<EditDeviceGroupsScreen>:
	group_index: self.group_index
    rows: 2
    spacing: 10
    canvas:
        Color:
            rgba: 1,1,1,1
        Rectangle:
            pos: self.pos
            size: self.size

    #ToolBar
    BoxLayout:
        size_hint_y: None
        height: 50
        spacing: 10
        pos: root.x, (root.height-50)

        # Make the background for the toolbar blue
        canvas:
            Color:
                rgba: hex('#0099cc')
            Rectangle:
                pos: self.pos
                size: self.size
        Button:
            on_press: root.manager.current = 'homescreen_1'
            background_normal: 'icons/home.png'
            size_hint_x: None
            width:50

    BoxLayout:
        size_hint_y: None
        height: 500
        spacing: 50
        padding: 20
        pos: root.x, (root.height-560)

        BoxLayout:
            orientation: "vertical"
            spacing: 10
            padding: 10
            canvas:
                Color:
                    rgba: hex('#0099cc')
                Rectangle:
                    pos: self.pos
                    size: self.size
			BoxLayout:
	            orientation: "horizontal"
				size_hint_y: None
	            spacing: 10
	            padding: 10
				height: 70
	            canvas:
	                Color:
	                    rgba: hex('#0099cc')
	                Rectangle:
	                    pos: self.pos
	                    size: self.size
            	Button:
                	size_hint_x: None
                	size_hint_y: None
                	height: 50
                	size: self.size
                	text: 'Create Group'
                	#on_release: root.create_group()
                	on_release: root.manager.current = 'create_group_screen_5.1'

				BoxLayout:
					size_hiny_x: 1

				Button:
					size_hint_x: None
                	size_hint_y: None
					####NEEDS TO BE SET TO VARIABLE VALUE

					height: 50
                	size: self.size
                	text: 'Load Groups'
					on_release: root.show_load()

				Button:
					size_hint_x: None
                	size_hint_y: None
					####NEEDS TO BE SET TO VARIABLE VALUE

					height: 50
                	size: self.size
                	text: 'Save Groups'
					on_release: root.show_save()

            #Groups holder
            BoxLayout:
                orientation: "vertical"
                canvas:
                    Color:
                        rgba: hex('#ffffff')
                    Rectangle:
                        pos: self.pos
                        size: self.size

                #Adds Scrollability
                ScrollView:
                    do_scroll_x:False
                    do_scroll_Y:True
                    BoxLayout:
                        id: glayout2
                        orientation: 'vertical'
                        spacing: 5
                        size_hint_y: None
                        height: self.minimum_height

<CreateGroupScreen>
	rows: 2
	spacing: 10
	canvas:
	    Color:
	        rgba: 1,1,1,1
	    Rectangle:
	        pos: self.pos
	        size: self.size

    BoxLayout:
        size_hint_y: None
        height: 50
        spacing: 10
        pos: root.x, (root.height-50)


        canvas:
            Color:
                rgba: hex('#0099cc')
            Rectangle:
                pos: self.pos
                size: self.size
        Button:
            on_press: root.manager.current = 'homescreen_1'
            background_normal: 'icons/home.png'
            size_hint_x: None
            width:50
	BoxLayout:
		size_hint_y: None
		height: 500
		spacing: 50
		padding: 20
		pos: root.x, (root.height-560)

		BoxLayout:
            orientation: "vertical"
            spacing: 10
            padding: 10
            canvas:
                Color:
                    rgba: hex('#0099cc')
                Rectangle:
                    pos: self.pos
                    size: self.size
			BoxLayout:
				orientation: "horizontal"
				spacing: 10
	            padding: 10
				height: 70
				size_hint_y: None
				Label:
					text: 'Group Name:'
					height: 50
				TextInput:
					spacing: 10
					size_hint_x: 0.4
					size_hint_y: None
					height: 50
					size: self.size
					text: 'New Group'
					multiline: False
					id: group_name


			BoxLayout:
				size_hint_y: .8
				canvas:
					Color:
						rgba: 1,1,1,1
					Rectangle:
				        pos: self.pos
				        size: self.size
			Button:
				spacing: 10
				size_hint_x: None
				size_hint_y: None
				height: 50
				pos_hint: {'center_x':.5, 'center_y': .5}
				size: self.size
				text: 'Ok'
				on_release: root.manager.edit_device_groups_screen.create_group()
				on_release: root.manager.current = 'group_template_screen_11'

<BuildTimelineScreen>:
	rows: 2
	spacing: 10
	canvas:
		Color:
			rgba: 1,1,1,1
		Rectangle:
			pos: self.pos
			size: self.size

	BoxLayout:
		size_hint_y: None
		height: 50
		spacing: 10
		pos: root.x, (root.height-50)

		# Make the background for the toolbar blue
		canvas:
			Color:
				rgba: hex('#0099cc')
			Rectangle:
				pos: self.pos
				size: self.size
		Button:
			on_press: root.manager.current = 'homescreen_1'
			background_normal: 'icons/home.png'
			size_hint_x: None
			width:50

	BoxLayout:
		size_hint_y: None
		height: 500
		spacing: 50
		padding: 50
		pos: root.x, (root.height-560)

		BoxLayout:
			orientation: "vertical"
			spacing: 10
			padding: 10
			canvas:
				Color:
					rgba: hex('#0099cc')
				Rectangle:
					pos: self.pos
					size: self.size
			Button:
				text: "Build Timeline"
				on_press: root.manager.current = 'edit_timeline_screen_7'
				font_size: 30

			Button:
				text: "Load Timeline"
				font_size: 30

			BoxLayout:
				size_hint_y: None
				height: 75
				orientation: "horizontal"
				spacing: 10
				padding: 10
				canvas:
					Color:
						rgba: hex('#ffffff')
					Rectangle:
						pos: self.pos
						size: self.size

				Button:
					text: 'Set Cycle Length'
					font_size: 25
					on_press: root.set_cycle_length()

				TextInput:
					padding: 10
					multiline:False
					id: cyclelength
					font_size: 25

<EditTimelineScreen>:
	rows: 2
	spacing: 10
	canvas:
		Color:
			rgba: 1,1,1,1
		Rectangle:
			pos: self.pos
			size: self.size

	#ToolBar
	BoxLayout:
		size_hint_y: None
		height: 50
		spacing: 10
		pos: root.x, (root.height-50)

		# Make the background for the toolbar blue
		canvas:
			Color:
				rgba: hex('#0099cc')
			Rectangle:
				pos: self.pos
				size: self.size
		Button:
			on_press: root.manager.current = 'homescreen_1'
			background_normal: 'icons/home.png'
			size_hint_x: None
			width:50

	BoxLayout:
		size_hint_y: None
		height: 500
		spacing: 50
		padding: 20
		pos: root.x, (root.height-560)

		BoxLayout:
			orientation: "vertical"
			spacing: 10
			padding: 10
			canvas:
				Color:
					rgba: hex('#0099cc')
				Rectangle:
					pos: self.pos
					size: self.size

			BoxLayout:
				orientation: "horizontal"
				padding:10
				size_hint_y: 0.15
				canvas:
					Color:
						rgba: hex('#0099cc')
					Rectangle:
						pos: self.pos
						size: self.size


				Button:
					size_hint_x: None
					size_hint_y: None
					height: 50
					width:100
					text: 'New Timeline'
					on_press: root.manager.edit_group_behaviour_screen.reset_settings()
					on_release: root.manager.current = 'build_timeline_screen_6'

				Button:
					size_hint_x: None
					size_hint_y: None
					height: 50
					width:100
					text: 'Add Slot'
					on_release: glayout3.add_widget(root.addSlot2())
					#on_release: self.text = "Pressed"
				BoxLayout:
					orientation: "horizontal"
					size_hint_x: 1
					canvas:
						Color:
							rgba: hex('#0099cc')
						Rectangle:
							pos: self.pos
							size: self.size

				Label:
					text: "Timeline Length:"
					font_size: 20


				TextInput:
					size_hint_x: 0.15
					spacing: 10
					height: 50
					multiline: False
					id: TLlength
					text: '1'
					on_text_validate: root.manager.setTLlength( float(self.text))


				BoxLayout:
					id: cyclelengthnumber
					orientation: "horizontal"

			#Groups holder
			BoxLayout:
				orientation: "vertical"
				canvas:
					Color:
						rgba: hex('#ffffff')
					Rectangle:
						pos: self.pos
						size: self.size

				#Adds Scrollability
				ScrollView:
					do_scroll_x:True
					GridLayout:
						id: glayout3
						rows:1
						size_hint_x: None
						width: self.minimum_width

						# Button:
						# 	text:"SLOT 1"
						# 	font_size: 20
						# 	size_hint_x: None
						# 	width: '200sp'
						# 	on_press: root.manager.select_group_screen.currentSlot = 1
						# 	on_release: root.manager.current = 'select_group_screen_8'
						#
						#
						#
						# Button:
						# 	text:"SLOT 2"
						# 	font_size: 20
						# 	size_hint_x: None
						# 	width: '200sp'
						# 	on_press: root.manager.select_group_screen.currentSlot = 2
						# 	on_release: root.manager.current = 'select_group_screen_8'
						#
						# Button:
						# 	text:"SLOT 3"
						# 	font_size: 20
						# 	size_hint_x: None
						# 	width: '200sp'
						# 	on_press: root.manager.select_group_screen.currentSlot = 3
						# 	on_release: root.manager.current = 'select_group_screen_8'
						#
						# Button:
						# 	text:"SLOT 4"
						# 	font_size: 20
						# 	size_hint_x: None
						# 	width: '200sp'
						# 	on_press: root.manager.select_group_screen.currentSlot = 4
						# 	on_release: root.manager.current = 'select_group_screen_8'
						#
						# Button:
						# 	text:"SLOT 5"
						# 	font_size: 20
						# 	size_hint_x: None
						# 	width: '200sp'
						# 	on_press: root.manager.select_group_screen.currentSlot = 5
						# 	on_release: root.manager.current = 'select_group_screen_8'
						#
						# Button:
						# 	text:"SLOT 6"
						# 	font_size: 20
						# 	size_hint_x: None
						# 	width: '200sp'
						# 	on_press: root.manager.select_group_screen.currentSlot = 6
						# 	on_release: root.manager.current = 'select_group_screen_8'
						#
						# Button:
						# 	text:"SLOT 7"
						# 	font_size: 20
						# 	size_hint_x: None
						# 	width: '200sp'
						# 	on_press: root.manager.select_group_screen.currentSlot = 7
						# 	on_release: root.manager.current = 'select_group_screen_8'
						#
						# Button:
						# 	text:"SLOT 8"
						# 	font_size: 20
						# 	size_hint_x: None
						# 	width: '200sp'
						# 	on_press: root.manager.select_group_screen.currentSlot = 8
						# 	on_release: root.manager.current = 'select_group_screen_8'
						#
						# Button:
						# 	text:"SLOT 9"
						# 	font_size: 20
						# 	size_hint_x: None
						# 	width: '200sp'
						# 	on_press: root.manager.select_group_screen.currentSlot = 9
						# 	on_release: root.manager.current = 'select_group_screen_8'
						#
						# Button:
						# 	text:"SLOT 10"
						# 	font_size: 20
						# 	size_hint_x: None
						# 	width: '200sp'
						# 	on_press: root.manager.select_group_screen.currentSlot = 10
						# 	on_release: root.manager.current = 'select_group_screen_8'
						#
						# Button:
						# 	text:"SLOT 11"
						# 	font_size: 20
						# 	size_hint_x: None
						# 	width: '200sp'
						# 	on_press: root.manager.select_group_screen.currentSlot = 11
						# 	on_release: root.manager.current = 'select_group_screen_8'
						#
						# Button:
						# 	text:"SLOT 12"
						# 	font_size: 20
						# 	size_hint_x: None
						# 	width: '200sp'
						# 	on_press: root.manager.select_group_screen.currentSlot = 12
						# 	on_release: root.manager.current = 'select_group_screen_8'

				BoxLayout:
					orientation: 'horizontal'

					BoxLayout:
						canvas:
							Color:
								rgba: hex('#0099cc')
							Rectangle:
								pos: self.pos
								size: self.size
						Label:
							font_size: 20

<SelectGroupScreen>:
	rows: 2
	spacing: 10
	canvas:
		Color:
			rgba: 1,1,1,1
		Rectangle:
			pos: self.pos
			size: self.size

	#ToolBar
	BoxLayout:
		size_hint_y: None
		height: 50
		spacing: 10
		pos: root.x, (root.height-50)

		# Make the background for the toolbar blue
		canvas:
			Color:
				rgba: hex('#0099cc')
			Rectangle:
				pos: self.pos
				size: self.size
		Button:
			on_press: root.manager.current = 'homescreen_1'
			background_normal: 'icons/home.png'
			size_hint_x: None
			width:50

	BoxLayout:
		orientation: "vertical"
		size_hint_y: None
		height: 500
		spacing: 50
		padding: 20
		pos: root.x, (root.height-560)

		BoxLayout:
			orientation: "vertical"
			spacing: 10
			padding: 10
			canvas:
				Color:
					rgba: hex('#0099cc')
				Rectangle:
					pos: self.pos
					size: self.size

			BoxLayout:
				orientation: "horizontal"
				size_hint_y: 0.15
				canvas:
					Color:
						rgba: hex('#0099cc')
					Rectangle:
						pos: self.pos
						size: self.size

				BoxLayout:
					orientation: "horizontal"
					size_hint_y: 0.15
					canvas:
						Color:
							rgba: hex('#0099cc')
						Rectangle:
							pos: self.pos
							size: self.size

					Button:
						size_hint_x: None
						size_hint_y: None
						height: 50
						width:100
						text: 'Back'
						on_release: root.manager.current = 'edit_timeline_screen_7'

					Button:
						size_hint_x: None
						size_hint_y: None
						height: 50
						width:100
						text: 'Remove Slot'
						on_release: root.manager.current = 'edit_timeline_screen_7'

				BoxLayout:
					id: slotnumber
					orientation: "horizontal"
					size_hint_y: 0.15
					canvas:
						Color:
							rgba: hex('#0099cc')
						Rectangle:
							pos: self.pos
							size: self.size

				BoxLayout:
					orientation: "horizontal"
					size_hint_x: None
					canvas:
						Color:
							rgba: hex('#0099cc')
						Rectangle:
							pos: self.pos
							size: self.size
				Label:
					id: SlotName
					text: "Slot"
					font_size: 20

			#Groups holder
			BoxLayout:
				orientation: "vertical"
				spacing: 5
				padding: 5
				canvas:
					Color:
						rgba: hex('#ffffff')
					Rectangle:
						pos: self.pos
						size: self.size

				#Adds Scrollability
				ScrollView:
					id: scrollview1
					do_scroll_x:False
					do_scroll_Y:True
					BoxLayout:
						id: glayout2
						orientation: 'vertical'
						spacing: 5
						size_hint_y: None
						height: self.minimum_height

<EditGroupBehaviourScreen>:
	rows: 2
	spacing: 10
	canvas:
		Color:
			rgba: 1,1,1,1
		Rectangle:
			pos: self.pos
			size: self.size

	BoxLayout:
		size_hint_y: None
		height: 50
		spacing: 10
		pos: root.x, (root.height-50)

		# Make the background for the toolbar blue
		canvas:
			Color:
				rgba: hex('#0099cc')
			Rectangle:
				pos: self.pos
				size: self.size
		Button:
			on_press: root.manager.current = 'homescreen_1'
			background_normal: 'icons/home.png'
			size_hint_x: None
			width:50

	BoxLayout:
		size_hint_y: None
		height: 500
		spacing: 50
		padding: 20
		pos: root.x, (root.height-560)

		BoxLayout:
			orientation: "vertical"
			spacing: 10
			padding: 10
			canvas:
				Color:
					rgba: hex('#0099cc')
				Rectangle:
					pos: self.pos
					size: self.size

			BoxLayout:
				size_hint_y: None
				orientation: "horizontal"
				height: 50
				spacing: 10
				padding: 0
				canvas:
					Color:
						rgba: hex('#0099cc')
					Rectangle:
						pos: self.pos
						size: self.size
				Button:
					size_hint_x: None
					size_hint_y: None
					height: 50
					width:100
					text: 'Back'

					on_press: root.back_out()
					on_release: root.manager.current = 'select_group_screen_8'
				Button:
					size_hint_x: None
					size_hint_y: None
					height: 50
					width:100
					text: 'Save'
					#on_press: root.save_changes(root.manager.select_group_screen.currentSlot,int(1),int(slider_id.value),int(eventlengthinput.value))
					on_release: root.save_changes2()
					on_release: root.manager.current = 'select_group_screen_8'

				BoxLayout:
					size_hint_x: 1

				BoxLayout:
					size_hint_x: None
					Label:
						id: SlotName
						text: "Slot"

				BoxLayout:
					size_hint_x: None
					Label:
						id: GroupName
						text: "Group"

			BoxLayout:
				orientation: "horizontal"
				spacing: 10
				padding: 10
				canvas:
					Color:
						rgba: hex('#ffffff')
					Rectangle:
						pos: self.pos
						size: self.size

				BoxLayout:
					orientation: "vertical"
					spacing: 5
					padding: 5
					canvas:
						Color:
							rgba: hex('#ffffff')
						Rectangle:
							pos: self.pos
							size: self.size

					BoxLayout:
						orientation: "horizontal"
						size_hint_y: None
						height: 50
						canvas:
							Color:
								rgba: hex('#98a6b3')
							Rectangle:
								pos: self.pos
								size: self.size

						Label:
							text: str(eventAmountSlider.value) + ' Events'
							font_size: 24

						Slider:
							id: eventAmountSlider
							min: 0
							max: 100
							value: 0
							step: 1

					BoxLayout:
						orientation: "horizontal"
						padding: 15
						spacing: 10
						size_hint_y: None
						height: 75
						canvas:
							Color:
								rgba: hex('#98a6b3')
							Rectangle:
								pos: self.pos
								size: self.size

						Label:
							text: 'Trigger %'
							font_size: 24

						TextInput:
							padding: 10
							multiline:False
							id:triggerpercentinput

						Label:
							text: 'Event length: '
							font_size: 24

						Slider:
							min: 0
							max: 100
							value: 0
							step: 1
							id:eventLengthSlider

						Label:
							text: str(eventLengthSlider.value) + ' tenths of\n seconds'
							font_size: 24

					BoxLayout:
						orientation: "vertical"
						spacing: 10
						padding: 10
						canvas:
							Color:
								rgba: hex('#98a6b3')
							Rectangle:
								pos: self.pos
								size: self.size

						ScrollView:
							do_scroll_x:False
							do_scroll_Y:True
							BoxLayout:
								id: triggerlisting
								orientation: 'vertical'
								spacing: 5
								size_hint_y: None
								height: self.minimum_height
								canvas:
									Color:
										rgba: hex('#ffffff')
									Rectangle:
										pos: self.pos
										size: self.size

<SaveDialogScreen>:

	rows: 2
	spacing: 10

	BoxLayout:

		size: self.size
		pos: self.pos
		orientation: "vertical"
		FileChooserListView:
			id: filechooser
			on_selection: text_input.text = self.selection and self.selection[0] or ''
			path: root.wd

		TextInput:
			id: text_input
			text: ""
			size_hint_y: None
			height: 30
			multiline: False
		BoxLayout:
			size_hint_y: None
			height: 30
			Button:
				text: "Cancel"
				on_release: root.cancel()
			Button:
				text: "Save"
				on_release:root.save(filechooser.path, text_input.text)

<LoadDialogScreen>:

	rows: 2
	spacing: 10

	BoxLayout:

		size: self.size
		pos: self.pos
		orientation: "vertical"
		FileChooserListView:
			id: filechooser
			on_selection: text_input.text = self.selection and self.selection[0] or ''
			path: root.wd

		TextInput:
			id: text_input
			text: "savefile.txt"
			size_hint_y: None
			height: 30
			multiline: False


		BoxLayout:
			size_hint_y: None
			height: 30
			Button:
				text: "Cancel"
				on_release: root.cancel()
			Button:
				text: "Load"
				on_release: root.load(filechooser.path, filechooser.selection)

<LoadingScreen>:
	rows: 2
	spacing: 10
	canvas:
		Color:
			rgba: 1,1,1,1
		Rectangle:
			pos: self.pos
			size: self.size

	BoxLayout:
		size_hint_y: None
		height: 50
		spacing: 10
		pos: root.x, (root.height-50)

		# Make the background for the toolbar blue
		canvas:
			Color:
				rgba: hex('#0099cc')
			Rectangle:
				pos: self.pos
				size: self.size
		Button:
			on_press: root.manager.current = 'homescreen_1'
			background_normal: 'icons/home.png'
			size_hint_x: None
			width:50

	BoxLayout:
		size_hint_y: None
		height: 500
		spacing: 50
		padding: 50
		pos: root.x, (root.height-560)

		BoxLayout:
			orientation: "vertical"
			spacing: 10
			padding: 10
			canvas:
				Color:
					rgba: hex('#0099cc')
				Rectangle:
					pos: self.pos
					size: self.size
			Label:
				text: "Working..."
				font_size: 30


<SaveDialogScreen>:

	rows: 2
	spacing: 10

	BoxLayout:

		size: self.size
		pos: self.pos
		orientation: "vertical"
		FileChooserListView:
			id: filechooser
			on_selection: text_input.text = self.selection and self.selection[0] or ''
			path: root.wd

		TextInput:
			id: text_input
			text: ""
			size_hint_y: None
			height: 30
			multiline: False
		BoxLayout:
			size_hint_y: None
			height: 30
			Button:
				text: "Cancel"
				on_release: root.cancel()
			Button:
				text: "Save"
				on_release:root.save(filechooser.path, text_input.text)

<LoadDialogScreen>:

	rows: 2
	spacing: 10

	BoxLayout:

		size: self.size
		pos: self.pos
		orientation: "vertical"
		FileChooserListView:
			id: filechooser
			on_selection: text_input.text = self.selection and self.selection[0] or ''
			path: root.wd

		TextInput:
			id: text_input
			text: "savefile.txt"
			size_hint_y: None
			height: 30
			multiline: False


		BoxLayout:
			size_hint_y: None
			height: 30
			Button:
				text: "Cancel"
				on_release: root.cancel()
			Button:
				text: "Load"
				on_release: root.load(filechooser.path, filechooser.selection)


<Manager>:
	id: screen_manager

	home_screen: home_screen
	run_screen: run_screen
	device_tester_screen: device_tester_screen
	connect_devices_screen: connect_devices_screen
	edit_device_groups_screen: edit_device_groups_screen
	create_group_screen: create_group_screen
	save_dialog_screen: save_dialog_screen
	load_dialog_screen: load_dialog_screen
	build_timeline_screen: build_timeline_screen
	edit_timeline_screen: edit_timeline_screen
	edit_group_behaviour_screen: edit_group_behaviour_screen
	select_group_screen: select_group_screen
	device_template_screen: device_template_screen
	group_template_screen: group_template_screen
	loading_screen: loading_screen

	HomeScreen:
		id: home_screen
		name: 'homescreen_1'
		manager: screen_manager

	RunScreen:
		id: run_screen
		name: 'runscreen_2'
		manager: screen_manager

	DeviceTesterScreen:
		id: device_tester_screen
		name: 'device_tester_screen_3'
		manager: screen_manager

	ConnectDevicesScreen:
		id: connect_devices_screen
		name: 'connect_devices_screen_4'
		manager: screen_manager

	EditDeviceGroupsScreen:
		id: edit_device_groups_screen
		name: 'edit_device_groups_screen_5'
		manager: screen_manager

	CreateGroupScreen:
		id: create_group_screen
		name: 'create_group_screen_5.1'
		manager: screen_manager

	SaveDialogScreen:
		id: save_dialog_screen
		name: 'save_dialog_screen_5.2'
		manager: screen_manager

	LoadDialogScreen:
		id: load_dialog_screen
		name: 'save_dialog_screen_5.3'
		manager: screen_manager

	BuildTimelineScreen:
		id: build_timeline_screen
		name: 'build_timeline_screen_6'
		manager: screen_manager

	EditTimelineScreen:
		id: edit_timeline_screen
		name: 'edit_timeline_screen_7'
		manager: screen_manager

	SelectGroupScreen:
		id: select_group_screen
		name: 'select_group_screen_8'
		manager: screen_manager

	EditGroupBehaviourScreen:
		id: edit_group_behaviour_screen
		name: 'edit_group_behaviour_screen_9'
		manager: screen_manager

	DeviceTemplateScreen:
		id: device_template_screen
		name: 'device_template_screen_10'
		manager: screen_manager

	GroupTemplateScreen:
		id: group_template_screen
		name: 'group_template_screen_11'
		manager: screen_manager
	LoadingScreen:
		id: loading_screen
		name: 'loading_screen'
		manager: screen_manager
